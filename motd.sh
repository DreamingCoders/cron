#!/usr/bin/env bash
update_motd(){ MOTD_FILE="/etc/motd"; GS_STATUS="❌"; BPY_STATUS="❌"; [ -f "/usr/local/bin/.gameserver_path" ] && [ -f "$(cat /usr/local/bin/.gameserver_path)" ] && GS_STATUS="✅"; [ -f "/usr/local/bin/.blender_script" ] && [ -f "$(cat /usr/local/bin/.blender_script)" ] && BPY_STATUS="⏱"; DAILY_REBOOT_TEXT="disabled"; [ -f "/usr/local/bin/.daily_reboot" ] && [ "$(cat /usr/local/bin/.daily_reboot)" -eq 1 ] && DAILY_REBOOT_TEXT="enabled"; { echo -e "${GREEN}Welcome to $(hostname)${NC}"; echo -e "Date: $(date)"; echo -e "Uptime: $(uptime -p)"; echo -e "Load: $(uptime | awk -F'load average:' '{print $2}')"; echo -e "Disk: $(df -h / | awk 'NR==2 {print $5}') used"; echo -e ""; echo -e "${BLUE}Custom Commands:${NC}"; echo -e "  ${YELLOW}sysinfo${NC}   -> neofetch"; echo -e "  ${YELLOW}diskalert${NC} -> Check disk space"; echo -e "  ${YELLOW}updateall${NC} -> System + language updates"; echo -e "  ${YELLOW}devtools${NC}  -> Stripe/PayPal installer"; echo -e "  ${YELLOW}gameserver${NC} -> Launch stored game server (${GS_STATUS})"; echo -e "  ${YELLOW}renderbpy${NC}  -> Run stored Blender render (${BPY_STATUS})"; echo -e "  ${YELLOW}toggle_reboot${NC} -> Enable/disable daily reboot (currently: ${DAILY_REBOOT_TEXT})"; echo -e ""; echo -e "${BLUE}Homesteading:${NC} Use ${YELLOW}/usr/local/bin${NC} as root path for custom executables. Add scripts here and chmod +x."; echo -e "${BLUE}Tips:${NC} Create your own commands: place executable in /usr/local/bin, chmod +x, add manually to MOTD."; } > "$MOTD_FILE"; log "MOTD updated."; }
update_motd
if ! grep -q "neofetch" /etc/profile; then echo "neofetch" >> /etc/profile; fi
